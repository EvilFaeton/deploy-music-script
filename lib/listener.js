var Player,PusherClient,notifier,player_finish,player_start,pres,pusher_client;PusherClient=require("pusher-node-client").PusherClient,Player=require("player"),notifier=require("node-notifier"),player_start=new Player("https://s3.amazonaws.com/karaoke_resume/music.mp3"),player_finish=new Player("https://s3.amazonaws.com/karaoke_resume/finite.mp3"),pusher_client=new PusherClient({appId:process.env.PUSHER_APP_ID||app_id,key:process.env.PUSHER_KEY||pusher_key,secret:process.env.PUSHER_SECRET||pusher_secret}),pres=null,pusher_client.on("connect",function(){return pres=pusher_client.subscribe("deploy",{user_id:"system"}),pres.on("success",function(){return pres.on("start",function(e){return console.log("deploy started"),player_start.play(),notifier.notify({title:"DEPLOYMENT START",message:"triggered by "+e.author})}),pres.on("finish",function(e){return player_start.stop(),player_finish.play(),player_finish.on("playend",function(){return player_finish.stop()}),console.log("deploy finished"),notifier.notify({title:"DEPLOYMENT FINISH",message:"finished in "+e.time})})})}),pusher_client.connect();